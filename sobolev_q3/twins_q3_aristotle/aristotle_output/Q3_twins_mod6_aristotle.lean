/-
This file was generated by Aristotle.

Lean version: leanprover/lean4:v4.24.0
Mathlib version: f897ebcf72cd16f89ab4577d0c826cd14afaafc7
This project request had uuid: 9e350715-3b07-464a-8c37-fa88c33d82d1
-/

/-
This module proves that for any twin prime pair (p, p+2) with p > 3, p is congruent to 5 modulo 6.
-/

import Mathlib

set_option linter.mathlibStandardSet false

open scoped BigOperators
open scoped Real
open scoped Nat
open scoped Classical
open scoped Pointwise

set_option maxHeartbeats 0
set_option maxRecDepth 4000
set_option synthInstance.maxHeartbeats 20000
set_option synthInstance.maxSize 128

set_option relaxedAutoImplicit false
set_option autoImplicit false

noncomputable section

/-
For all twin primes p > 3: p ≡ 5 (mod 6).
-/
theorem twin_prime_mod6 (p : ℕ) (hp3 : p > 3)
    (hp : Nat.Prime p) (hq : Nat.Prime (p + 2)) :
    p % 6 = 5 := by
  -- Since $p > 3$, and primes $p$ greater than $3$ are coprime to $6$, $p$ modulo $6$ must be $1$ or $5$.
  have h_mod_cases : p % 2 = 1 ∧ p % 3 ≠ 0 := by
    exact ⟨ hp.eq_two_or_odd.resolve_left ( by linarith ), fun h => by have := Nat.dvd_of_mod_eq_zero h; rw [ hp.dvd_iff_eq ] at this <;> linarith ⟩;
  rw [ ← Nat.mod_mod_of_dvd p ( by decide : 2 ∣ 6 ), ← Nat.mod_mod_of_dvd p ( by decide : 3 ∣ 6 ) ] at h_mod_cases; have := Nat.mod_lt p ( by decide : 6 > 0 ) ; interval_cases _ : p % 6 <;> simp_all +decide ;
  exact absurd ( Nat.dvd_of_mod_eq_zero ( by omega : ( p + 2 ) % 3 = 0 ) ) ( by rw [ hq.dvd_iff_eq ] <;> linarith )